@model AnalisisCausaRaizModels

@{
    var DescripcionTrim = "";
    @if (Model.Descripcion == null)
    {
        DescripcionTrim = "";

    }
    else
    {

        DescripcionTrim = Model.Descripcion;

    }

}

<div class="row">
    <!-- Welcome -->
    <div class="col-lg-12">
        <div class="alert alert-info">
            <i></i><P>REGISTRAR CAUSA</P>

        </div>
    </div>
    <!--end  Welcome -->
</div>


<form asp-action="FormularioCrearCausa" asp-contrller="AnalisisCausaRaiz" enctype="multipart/form-data" class="form-horizontal" role="form" method="post">
    

    <div class="text-danger" asp-validation-summary="All"></div>
    
    <div class="row">
        <div class="col-md-6 col-sm-6">



            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                Datos
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group">
                                <label asp-for="@Model.EventoId" class="col-lg-4">Id Evento</label>
                                <div class="col-lg-7">
                                    <input asp-for="@Model.EventoId" class="form-control" id="wolabel"
                                           placeholder="wo" readonly="readonly">
                                </div>
                            </div>

                            <div class="form-group">


                                @Html.Label("Fecha Registro", null, new { @class = " col-lg-4" })
                                <div class="col-lg-7">
                                    <input class="form-control" name="FechaRegistro" asp-for="@Model.FechaRegistro" type="date" required />
                                </div>

                            </div>
                            <div class="form-group">
                                <label class="col-lg-4">¿Se Acepta No Conformidad?</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.EventoUnico.Ncaceptada" class="form-control" id="sel2" required>
                                        <option value="" disabled selected>Selecciona tu opción</option>
                                        <option value="true">Si</option>
                                        <option value="false">No</option>

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Origen Falla</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.OrigenFalla" class="form-control" id="sel2" required>
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaOrigenFalla)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label asp-for="@Model.FallaPrimaria" class="col-lg-4">Falla Primaria</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.FallaPrimaria" class="form-control" id="FallaPrimariaID" required>
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaFallaPrimaria)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }   
                                

                                    </select>
                                </div>
                            </div>
                   

                                <div class="form-group">
                                    <label asp-for="@Model.FallaSecundaria" class="col-lg-4">Falla Secundaria</label>
                                    <div class="col-lg-7">
                                        <select asp-for="@Model.FallaSecundaria" id="FallaSecundariaID" class="form-control" required>
                                            <option value="" disabled selected>Selecciona tu opción</option>
                               
                                        </select>
                                    </div>
                                </div>
                            



                            @*<div class="form-group">
                                <label class="col-lg-4">Falla Secundaria</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.OrigenFalla" class="form-control" id="sel2" required>
                                        <option value="" disabled selected>Selecciona tu opción</option>

                             
                                    </select>
                                </div>
                            </div>*@

                            <div class="form-group">
                                <label class="col-lg-4">Archivos</label>
                                <div class="col-lg-7">
                                    <p>Se puede seleccionar uno o mas archivos</p>
                                    <input type="file" name="files" multiple />
                                </div>


                            </div>
                            <div class="form-group">
                                <label class="col-lg-4">Costos</label>
                                <div class="col-lg-7">
                                    <input asp-for="@Model.Costo" class="form-control" id="SerieComponente"
                                           placeholder="Costos">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Descripción</label>
                                <div class="col-lg-7">
                                    <textarea class="form-control" id="textarea" asp-for="Descripcion" name="Descripcion"
                                              placeholder="Descripción"> </textarea>
                                </div>
                            </div>

                       </div>
                    </div>
                </div>
                </div>


     

                @*---------------------------------Procesos-----------------------------------*@


            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                Procesos
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body">

                            <div class="form-group">
                                <label class="col-lg-4"></label>
                                <div class="col-lg-7">
                                    <h3>Procesos</h3>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Proceso 1</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Proceso1" class="form-control" id="Proceso1ID">
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaProceso1)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-lg-4">Proceso 2</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Proceso2" class="form-control" id="Proceso2ID">
                                        <option value="" disabled selected>Selecciona tu opción</option>

             

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Proceso 3</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Proceso3" class="form-control" id="Proceso3ID">
                                        <option value="" disabled selected>Selecciona tu opción</option>

                              

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Proceso 4</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Proceso4" class="form-control" id="Proceso4">
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaProceso4)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Proceso 5</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Proceso5" class="form-control" id="Proceso5" >
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaProceso5)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>
                      </div>
                    </div>
                </div>
             </div>


               

                <button type="submit" class="btn btn-primary">Registar</button>
                <a asp-action="Index" asp-controller="EventoSecuencia" class="btn btn-default" asp-route-EventoID="@Model.EventoId">Cancelar</a>

            </div>
        @*-------------------------------Levels--------------------------*@
        <div class="col-md-6">



            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                Mapa Causa Raiz
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="col-lg-4">Causal 1</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.Causa1" class="form-control" id="Causa1">
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaCausa1)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label asp-for="@Model.Causa2" class="col-lg-4">Causal 2</label>
                                <div class="col-lg-7">
                                    <select id="Causa2" asp-for="@Model.Causa2" class="form-control" asp-items='@(new SelectList(String.Empty,"Id","Nombre"))'>
                                        <option value="" disabled selected>Selecciona tu opción</option>
                             
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label asp-for="@Model.Causa3" class="col-lg-4">Causal 3</label>
                                <div class="col-lg-7">
                                    <select id="Causa3" asp-for="@Model.Causa3" class="form-control" asp-items='@(new SelectList(String.Empty,"Id","Nombre"))'>
                                        <option value="" disabled selected>Selecciona tu opción</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label asp-for="@Model.Causa4" class="col-lg-4">Causal 4</label>
                                <div class="col-lg-7">
                                    <select id="Causa4" asp-for="@Model.Causa4" class="form-control" asp-items='@(new SelectList(String.Empty,"Id","Nombre"))'>
                                        <option value="" disabled selected>Selecciona tu opción</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label asp-for="@Model.Causa5" class="col-lg-4">Causal 5</label>
                                <div class="col-lg-7">
                                    <select id="Causa5" asp-for="@Model.Causa5" class="form-control" asp-items='@(new SelectList(String.Empty,"Id","Nombre"))'>
                                        <option value="" disabled selected>Selecciona tu opción</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-lg-4">Causa Intermedia 1</label>
                                <div class="col-lg-7">
                                    <select asp-for="@Model.CausaIntermedia1" class="form-control" id="CausaIntermedia1">
                                        <option value="" disabled selected>Selecciona tu opción</option>

                                        @foreach (var kvp in Model.ListaCausaIntermedia1)
                                        {
                                            <option value="@kvp.Id">@kvp.Nombre</option>

                                        }

                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-lg-4">Causa Intermedia 2</label>
                                <div class="col-lg-7">
                                    <select  asp-for="@Model.CausaIntermedia2" class="form-control" id="CausaIntermedia2">
                                        <option value="" disabled selected>Selecciona tu opción</option>
                                    </select>
                                </div>
                            </div>

          

                        </div>
                    </div>
                </div>
          </div>


              





            </div>
     </div>

</form>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
        $(function () {
            $("#Causa1").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausa2Id";
                var ddlsource = "#Causa1";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Causa2").empty();
                    $("#Causa3").empty();
                    $('#Causa3').append('<option value="" disabled selected> Selecciona tu opción </option>');
                    $("#Causa4").empty();
                    $('#Causa4').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $("#Causa5").empty();
                    $('#Causa5').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Causa2").html(items);
                })
            });
        });
    //-------------------------------------------------------------------------

    var inputCausa = document.getElementById('Causa1').value;
        if (inputCausa>0) {
            var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausa2Id";
            var ddlsourceCausa = "#Causa1";
                $.getJSON(url, { id: $(ddlsourceCausa).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Causa2").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Causa2").html(items);
                })
        }


    //-------------------------------------------------------------------------

        $(function () {
            $("#Causa2").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausa3Id";
                var ddlsource = "#Causa2";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Causa3").empty();
                    $("#Causa4").empty();
                    $('#Causa4').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $("#Causa5").empty();
                    $('#Causa5').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Causa3").html(items);
                })
            });
        });

    //-------------------------------------------------------------------------
        $(function () {
            $("#Causa3").change(function () {

                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausa4Id";
                var ddlsource = "#Causa3";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Causa4").empty();
                    $("#Causa5").empty();
                    $('#Causa5').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Causa4").html(items);
                })
            });


        });


    //-------------------------------------------------------------------------
        $(function () {
            $("#Causa4").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausa5Id";
                var ddlsource = "#Causa4";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Causa5").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Causa5").html(items);
                })
            });
        });

    //-------------------------------------------------------------------------
        var inputCausaIntermedia2 = document.getElementById('CausaIntermedia1').value;
        if (inputCausaIntermedia2>0) {
            var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausaIntermedia2ID";
            var ddlsource = "#CausaIntermedia1";
            $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#CausaIntermedia2").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#CausaIntermedia2").html(items);
                })
        }

    //-------------------------------------------------------------------------
        $(function () {
            $("#CausaIntermedia1").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getCausaIntermedia2Id";
                var ddlsource = "#CausaIntermedia1";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#CausaIntermedia2").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#CausaIntermedia2").html(items);
                })
            });
        });

    //-------------------------------------------------------------------------
        $(function () {
            $("#FallaPrimariaID").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getFallaSecundaria";
                var ddlsource = "#FallaPrimariaID";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#FallaSecundariaID").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#FallaSecundariaID").html(items);
                })
            });
        });

    //-------------------------------------------------------------------------
        var inputFallaPrimaria = document.getElementById('FallaPrimariaID').value;
        if (inputFallaPrimaria>0) {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getFallaSecundaria";
                var ddlsource = "#FallaPrimariaID";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#FallaSecundariaID").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#FallaSecundariaID").html(items);
                })
        }
    //-------------------------------------------------------------------------
        $(function () {
            $("#Proceso1ID").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getProceso2";
                var ddlsource = "#Proceso1ID";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Proceso2ID").empty();
                    $("#Proceso3ID").empty();
                    $('#Proceso3ID').append('<option value="" disabled selected>  Selecciona tu opción </option>');
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Proceso2ID").html(items);
                })
            });
        });
    //-------------------------------------------------------------------------

        var inputProceso1 = document.getElementById('Proceso1ID').value;
        if (inputProceso1>0) {
            var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getProceso2";
            var ddlsource = "#Proceso1ID";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Proceso2ID").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Proceso2ID").html(items);
                })
        }
    //-------------------------------------------------------------------------

        $(function () {
            $("#Proceso2ID").change(function () {
                var url = '@Url.Content("~/")' + "AnalisisCausaRaiz/getProceso3";
                var ddlsource = "#Proceso2ID";
                $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                    var items = '"<option value=0 disabled selected>Selecciona tu opción</option > "';
                    $("#Proceso3ID").empty();
                    $.each(data, function (i, row) {
                        items += "<option value='" + row.value + "' >" + row.text + "</option > "
                    });
                    $("#Proceso3ID").html(items);
                })
            });


        });


</script>